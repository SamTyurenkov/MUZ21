$=jQuery,$(document).ready((function(){document.getElementById("userthumb").addEventListener("change",(function(e){var ajaxurl=localize_author.ajaxurl,id=localize_author.aid,nonce=document.getElementById("_editauthmeta").value,extension=!1;if(this.parentElement.getElementsByTagName("label")[0].innerHTML="Подождите",meta=this.files[0].name,file=this.files[0],"image/jpg"===file.type||"image/png"===file.type||"image/jpeg"===file.type?extension=!0:(this.parentElement.getElementsByTagName("label")[0].style.background="#fdd2d2",ErrorsManager.createEl("error","Ошибка: только JPG или PNG файлы")),!0===extension){var data=new FormData;data.append("file",file),data.append("id",id),data.append("nonce",nonce),data.append("meta",meta),data.append("action","updateavatar");jQuery.ajax({url:ajaxurl,data:data,type:"POST",cache:!1,processData:!1,contentType:!1,dataType:"json",success:function(data,textStatus,jqXHR){var uthumb=document.getElementById("userthumb").parentElement.getElementsByTagName("label")[0];console.log("data.response "+data.response+" "+textStatus),"SUCCESS"==data.response&&(ErrorsManager.createEl("success","Аватар успешно обновлен."+data.details),uthumb.style.backgroundImage="url('"+data.thumb+"?v="+data.version+"')",uthumb.style.backgroundSize="cover"),"ERROR"==data.response&&(uthumb.style.background="#fdd2d2",ErrorsManager.createEl("error","Ошибка: "+data.error))},error:function(jqXHR,textStatus,errorThrown){document.getElementById("userthumb").parentElement.getElementsByTagName("label")[0].style.background="#fdd2d2",ErrorsManager.createEl("error","Ошибка: "+errorThrown)}})}}),!0)}));
$=jQuery,$(document).ready((function(){$(".createevent").on("click",(function(e){e.preventDefault();var ajaxurl=localize.ajaxurl,meta=document.getElementsByClassName("neweventname")[0].value,nonce=document.getElementById("_editauthmeta").value;jQuery.ajax({type:"POST",url:ajaxurl,cache:!1,data:{id:id,meta:meta,nonce:nonce,action:"creategame"},success:function(data,textStatus,jqXHR){"SUCCESS"==data.response?(ErrorsManager.createEl("success","Черновик события создан"),location.href=localize.homeurl+"?p="+data.info):"ERROR"==data.response&&ErrorsManager.createEl("error","Ошибка: "+data.error)},error:function(jqXHR,textStatus,errorThrown){ErrorsManager.createEl("error","Ошибка: "+textStatus)}})}))}));
$=jQuery,$(document).ready((function(){$("#valisend").on("click",(function(e){e.preventDefault();var ajaxurl=localize.ajaxurl,nonce=document.getElementById("_vali_send").value;jQuery.ajax({type:"POST",url:ajaxurl,cache:!1,data:{nonce:nonce,action:"valisend"},success:function(data,textStatus,jqXHR){document.getElementById("valisend").style.pointerEvents="none",ErrorsManager.createEl("success","Письмо успешно отправлено")},error:function(jqXHR,textStatus,errorThrown){console.log("val.error"),document.getElementById("valisend").style.pointerEvents="none",ErrorsManager.createEl("error","Ошибка: "+textStatus)}})}))}));
$=jQuery,$(document).ready((function(){document.getElementById("logout").addEventListener("click",(function(e){var ajaxurl=localize.ajaxurl,nonce=document.getElementById("_editauthmeta").value;jQuery.ajax({type:"POST",url:ajaxurl,cache:!1,data:{nonce:nonce,action:"logout"},success:function(data,textStatus,jqXHR){window.open(localize.homeurl,"_self")},error:function(jqXHR,textStatus,errorThrown){window.open(localize.homeurl,"_self")}})}))}));
$=jQuery,$(document).ready((function(){function updatemetas(field){if("custom-select"==field.parentNode.parentNode.classList[0])var name=field.parentNode.parentNode.id,meta=field.innerHTML;else name=field.classList[1],meta=field.value;var ajaxurl=localize_author.ajaxurl,id=localize_author.aid,nonce=document.getElementById("_editauthmeta").value;jQuery.ajax({type:"POST",url:ajaxurl,cache:!1,data:{meta:meta,id:id,name:name,nonce:nonce,action:"updateauth"},success:function(data,textStatus,jqXHR){"SUCCESS"==data.response?ErrorsManager.createEl("success","Информация успешно обновлена"):"ERROR"==data.response&&ErrorsManager.createEl("error","Ошибка: "+data.error)},error:function(jqXHR,textStatus,errorThrown){ErrorsManager.createEl("error","Ошибка: "+errorThrown)}})}for(var fields=document.querySelectorAll(".editauthor .text, .integration .text"),i=0;i<fields.length;i++)fields[i].addEventListener("change",(function(){updatemetas(this)}),!1);var selects=document.querySelectorAll("#settings .select-items div");for(i=0;i<selects.length;i++)selects[i].addEventListener("click",(function(){updatemetas(this)}),!1)}));
$=jQuery,$(document).ready((function(){document.querySelector(".usermenu_tabs_el").classList.add("active"),document.querySelector(".usermenu_tabscontent_el").classList.add("active"),$(".usermenu_tabs_el").on("click",(function(e){$(".usermenu_tabs_el").removeClass("active"),$(".usermenu_tabscontent_el").removeClass("active"),$(this).addClass("active");var tabname=$(this).data("name");$(".usermenu_tabscontent").find(`[data-name='${tabname}']`).addClass("active")}))}));